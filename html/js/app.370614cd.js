(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],d=0,v=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&v.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(v.length)v.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,o=1;o<i.length;o++){var l=i[o];0!==n[l]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},n={app:0},s=[];function o(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"9f2ad354"}[t]+".js"}function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(t){var e=[],i=n[t];if(0!==i)if(i)e.push(i[2]);else{var a=new Promise((function(e,a){i=n[t]=[e,a]}));e.push(i[2]=a);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=o(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(d);var i=n[t];if(0!==i){if(i){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",c.name="ChunkLoadError",c.type=a,c.request=s,i[1](c)}n[t]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/lottery/",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},1505:function(t,e,i){t.exports=i.p+"img/gray.c3db2077.jpg"},"2ae2":function(t,e,i){"use strict";i("fbac")},"38e4":function(t,e,i){},"4cb4":function(t,e,i){"use strict";i("904f")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-main",[i("router-view")],1)],1)},s=[],o={name:"App",data:function(){return{}}},r=o,l=i("2877"),c=i("6544"),d=i.n(c),u=i("7496"),v=i("f6c4"),m=Object(l["a"])(r,n,s,!1,null,null,null),h=m.exports;d()(m,{VApp:u["a"],VMain:v["a"]});i("d3b7"),i("3ca3"),i("ddb0");var p=i("8c4f"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("v-row",{staticStyle:{margin:"auto 0px"},attrs:{justify:"center"}},[i("v-col",[i("v-card",{ref:"form"},[i("v-card-title",{staticClass:"title font-weight-regular justify-space-between"},[i("span",[t._v("登录/注册")])]),i("v-card-text",[i("v-text-field",{ref:"phone",attrs:{rules:t.rules,label:"手机号",required:""},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),i("div",{staticClass:"flex-dir-row"},[i("v-text-field",{ref:"yan",attrs:{label:"验证码"},model:{value:t.yan,callback:function(e){t.yan=e},expression:"yan"}}),t.getBtn?i("v-btn",{staticStyle:{"margin-top":"15px"},attrs:{small:"",text:"",color:"primary"},on:{click:t.getBtnYan}},[t._v("获取")]):t._e(),t.timeBtn?i("v-btn",{staticStyle:{"margin-top":"15px"},attrs:{disabled:!0,small:"",text:"",color:"primary"}},[t._v("重新获取 "+t._s(t.time)+" s")]):t._e()],1),i("div",[t._v(t._s(t.msg_i))])],1),i("v-divider",{staticClass:"mt-12"}),i("v-card-actions",[i("v-btn",{attrs:{text:""},on:{click:t.backBtn}},[t._v("返回")]),i("v-spacer"),i("v-slide-x-reverse-transition",[t.formHasErrors?i("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"my-0",attrs:{icon:""},on:{click:t.resetForm}},"v-btn",n,!1),a),[i("v-icon",[t._v("mdi-refresh")])],1)]}}],null,!1,522373079)},[i("span",[t._v("Refresh form")])]):t._e()],1),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.submit}},[t._v("登录/注册")])],1),i("div",[t._v(t._s(t.login_channel))])],1)],1)],1),i("v-snackbar",{attrs:{timeout:t.timeout,top:""},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[i("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)])},g=[],b=(i("159b"),i("b64b"),i("4c53"),i("bc3a")),y=i.n(b),x=y.a.create({timeout:3e4,baseURL:"http://localhost:52537"});x.interceptors.request.use((function(t){var e=JSON.parse(localStorage.getItem("token"));return e&&(t.headers.Authorization="Bearer "+e.access_token),t}),(function(t){return console.log(t),Promise.reject(t)})),x.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}));var I=x,_=i("4328"),k=i.n(_);function w(t){return I({url:"/api/sms",method:"post",data:t})}function C(t){return t=k.a.stringify(t),I({url:"/connect/token",method:"post",data:t})}function T(t){return I({url:"/connect/userinfo",method:"get",params:t})}function P(t){return I({url:"/api/User",method:"get",params:t})}function V(t){return I({url:"/api/User",method:"delete",data:t})}function A(t){return I({url:"/api/Address/list",method:"get",params:t})}function S(t){return I({url:"/api/Address",method:"post",data:t})}function z(t){return I({url:"/api/Address",method:"put",data:t})}function O(t){return I({url:"/api/Address",method:"delete",data:t})}function D(t){return I({url:"/api/Lottery/winning-records",method:"get",params:t})}function j(t){return I({url:"/api/Lottery",method:"post",data:t})}function L(t){return I({url:"/api/Activity",method:"get",params:t})}function N(t){return I({url:"/api/Activity/list",method:"get",params:t})}function $(t){return I({url:"/api/Activity",method:"post",data:t})}function B(t){return I({url:"/api/Activity",method:"delete",data:t})}function M(t){return I({url:"/api/ActivityUser/user",method:"get",params:t})}function E(t){return I({url:"/api/ActivityUser/bindAvailable",method:"post",data:t})}function U(t){return I({url:"/api/ActivityUser/redeeming",method:"patch",data:t})}function R(t){return I({url:"/api/Attendance",method:"post",data:t})}function F(t){return I({url:"/api/User",method:"post",data:t})}function q(t){return I({url:"/api/PrizeItem",method:"post",data:t})}function Y(t){return I({url:"/api/PrizeItem/name",method:"get",params:t})}function J(t){return I({url:"/api/PrizeItem",method:"get",params:t})}function H(t){return I({url:"/api/PrizeItem/list",method:"get",params:t})}function X(t){return I({url:"/api/PrizeItem/all",method:"get",params:t})}function W(t){return I({url:"/api/PrizeItem",method:"delete",data:t})}function G(t){return I({url:"/api/PrizeItem",method:"put",data:t})}function K(t){return I({url:"/api/PrizeTier",method:"post",data:t})}function Z(t){return I({url:"/api/PrizeTier",method:"get",params:t})}function Q(t){return I({url:"/api/PrizeTier/activity",method:"get",params:t})}function tt(t){return I({url:"/api/PrizeTier",method:"delete",data:t})}function et(t){return I({url:"/api/PrizeTier",method:"put",data:t})}var it={name:"Login",data:function(){return{rules:[function(t){return!!t||"请输入手机号！."},function(t){return(t||"").length<=11||"超过上限！"}],snackbar:!1,text:"请输入正确手机号！",timeout:1500,phone:"",yan:"",formHasErrors:!0,yanzhengma:!1,getBtn:!0,timeBtn:!1,time:60,login_channel:"",loading:!1,post:null,error:null,msg_i:""}},computed:{form:function(){return{phone:this.phone,yan:this.yan}}},created:function(){this.fetchData(),this.getLoginChannel()},watch:{$route:"fetchData"},methods:{getLoginChannel:function(){this.login_channel=this.$route.query.login_channel},backBtn:function(){this.$router.push({path:"/"})},getBtnYan:function(){this.getBtn=!1,this.timeBtn=!0,this.setTime(this.time);var t={PhoneNumber:this.phone};w(t).then((function(t){console.log(t)}))},setTime:function(){if(0===this.time)return this.time=60,this.getBtn=!0,this.timeBtn=!1,!1;this.time--,setTimeout(this.setTime,1e3)},getPhone:function(){var t=this.phone,e=/^1(3|4|5|6|7|8|9)\d{9}$/.test(t);e?6!==this.yan.length?(this.snackbar=!0,this.text="请输入正确验证码！"):this.yanzhengma=!0:(this.snackbar=!0,this.text="请输入正确手机号！")},resetForm:function(){var t=this;this.formHasErrors=!0,Object.keys(this.form).forEach((function(e){t.$refs[e].reset()}))},submit:function(){var t=this;if(this.yanzhengma=!1,this.getPhone(),this.yanzhengma){console.log("成功");var e={client_id:"sms.client",client_secret:"secret",grant_type:"sms",scope:"eplus.test.scope openid",phone_number:this.phone,token:this.yan,login_channel:this.login_channel};C(e).then((function(e){console.log(e.data);var i={access_token:e.data.access_token};i=JSON.stringify(i),localStorage.setItem("token",i),T().then((function(e){if(e){console.log("userid:"),console.log(e);var i={userId:e.data.sub,login_channel:t.login_channel};i=JSON.stringify(i),localStorage.setItem("user",i),t.$router.push({path:"/home/ngs"})}}))}))}else console.log("失败")},fetchData:function(){this.error=this.post=null,this.loading=!0,this.$route&&console.log(this.$route)}}},at=it,nt=(i("dc11"),i("8336")),st=i("b0af"),ot=i("99d9"),rt=i("62ad"),lt=i("ce7e"),ct=i("132d"),dt=i("0fd9"),ut=i("0789"),vt=i("2db4"),mt=i("2fa4"),ht=i("8654"),pt=i("3a2f"),ft=Object(l["a"])(at,f,g,!1,null,"8419c074",null),gt=ft.exports;d()(ft,{VBtn:nt["a"],VCard:st["a"],VCardActions:ot["a"],VCardText:ot["c"],VCardTitle:ot["d"],VCol:rt["a"],VDivider:lt["a"],VIcon:ct["a"],VRow:dt["a"],VSlideXReverseTransition:ut["e"],VSnackbar:vt["a"],VSpacer:mt["a"],VTextField:ht["a"],VTooltip:pt["a"]});var bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-system-bar"),i("v-app-bar",{attrs:{flat:"",dense:"",absolute:""}},[i("v-btn",{attrs:{icon:""},on:{click:t.backBtn}},[i("v-icon",[t._v("mdi-arrow-left")])],1),i("v-btn",{attrs:{icon:"",right:""}},[i("v-icon",[t._v("mdi-home")])],1)],1),i("v-main",[i("router-view")],1),i("v-footer",[i("v-bottom-navigation",{attrs:{grow:"",shift:"",fixed:""},model:{value:t.bottomNav,callback:function(e){t.bottomNav=e},expression:"bottomNav"}},[i("v-btn",{attrs:{value:"home"},on:{click:t.ngsBtn}},[i("span",[t._v("首页")]),i("v-icon",[t._v("mdi-home")])],1),i("v-btn",{attrs:{value:"person"},on:{click:t.personBtn}},[i("span",[t._v("个人信息")]),i("v-icon",[t._v("mdi-account")])],1)],1)],1)],1)},yt=[],xt=(i("b0c0"),{name:"Layout",data:function(){return{bottomNav:"home",window:!0}},methods:{ngsBtn:function(){this.$router.push({path:"/home/ngs",params:{number:1}}),this.bottomNav="home"},personBtn:function(){this.$router.push({path:"/home/person"}),this.bottomNav="person"},backBtn:function(){this.$router.back();var t=this.$route;"Adward"===t.name||"Address"===t.name?this.bottomNav="person":"Person"===t.name?this.bottomNav="home":"Ngs"===t.name&&(this.bottomNav="person")}}}),It=xt,_t=i("40dc"),kt=i("b81c"),wt=i("553a"),Ct=i("afd9"),Tt=Object(l["a"])(It,bt,yt,!1,null,null,null),Pt=Tt.exports;d()(Tt,{VApp:u["a"],VAppBar:_t["a"],VBottomNavigation:kt["a"],VBtn:nt["a"],VFooter:wt["a"],VIcon:ct["a"],VMain:v["a"],VSystemBar:Ct["a"]});var Vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v(t._s(t.person))]),i("v-list",{attrs:{"two-line":"",subheader:""}},[i("v-subheader",{attrs:{inset:""}},[t._v("个人资料")]),t._l(t.items,(function(e){return i("v-list-item",{key:e.title},[i("v-list-item-content",{on:{click:function(i){return t.itemBtn(e)}}},[i("v-list-item-title",{domProps:{textContent:t._s(e.title)}}),i("v-list-item-subtitle",{directives:[{name:"show",rawName:"v-show",value:"个人信息"===e.title,expression:"item.title === '个人信息'"}]},[t._v("积分："+t._s(e.subtitle))])],1),i("v-list-item-action",[0!==e.val?i("v-btn",{attrs:{icon:""},on:{click:function(i){return t.itemBtn(e)}}},[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-information")])],1):t._e()],1)],1)}))],2)],1)},At=[],St={name:"Person",data:function(){return{items:[{icon:"folder",iconClass:"grey lighten-1 white--text",title:"个人信息",subtitle:"",val:0},{icon:"folder",iconClass:"grey lighten-1 white--text",title:"中奖记录",subtitle:"",val:1},{icon:"folder",iconClass:"grey lighten-1 white--text",title:"地址管理",subtitle:"",val:2}],person:"个人信息",userMsg:{}}},created:function(){this.ifLogin(),this.getUserinfo()},methods:{attendance:function(t){console.log("签到："),console.log(t);var e=this.getLocalStorageUser(),i={channelCode:"ngs",earnedCredits:0,reason:"签到",userId:e.userId,activityId:"3fa85f64-5717-4562-b3fc-2c963f66afa6"};console.log(i),R(i).then((function(t){console.log(t)}))},getUserinfo:function(){var t=this,e=this.getLocalStorageUser(),i={id:e.userId};console.log(i),P(i).then((function(e){console.log("获取到的用户数据"),console.log(e),t.items[0].subtitle=e.data.data.credit}))},ifLogin:function(){this.userMsg=JSON.parse(localStorage.getItem("token")),this.userMsg?this.userMsg&&console.log("登录"):(this.userMsg={},this.$router.push({path:"/login"}))},itemBtn:function(t){console.log(t.val),2===t.val?this.$router.push({path:"/home/address"}):1===t.val&&this.$router.push({path:"/home/adward"})},getLocalStorageUser:function(){var t=localStorage.getItem("user");return t=JSON.parse(t),t}}},zt=St,Ot=i("8860"),Dt=i("da13"),jt=i("1800"),Lt=i("5d23"),Nt=i("e0c7"),$t=Object(l["a"])(zt,Vt,At,!1,null,null,null),Bt=$t.exports;d()($t,{VBtn:nt["a"],VIcon:ct["a"],VList:Ot["a"],VListItem:Dt["a"],VListItemAction:jt["a"],VListItemContent:Lt["a"],VListItemSubtitle:Lt["b"],VListItemTitle:Lt["c"],VSubheader:Nt["a"]});var Mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v(t._s(t.person))]),i("v-list",{attrs:{"two-line":"",subheader:""}},[i("v-subheader",{attrs:{inset:""}},[t._v("默认地址")]),t._l(t.items2,(function(e){return i("v-list-item",{key:e.title},[i("v-list-item-content",{on:{click:function(i){return t.getAddressInfo(e)}}},[i("v-list-item-title",[t._v(t._s(e.recipient)+" "+t._s(e.recipientPhoneNumber))]),i("v-list-item-subtitle",[t._v(t._s(e.province)+" "+t._s(e.city)+" "+t._s(e.region))]),i("v-list-item-subtitle",[t._v(t._s(e.detailedAddress))])],1)],1)})),i("v-divider",{attrs:{inset:""}}),i("v-subheader",{attrs:{inset:""}},[t._v("所有地址")]),t._l(t.items,(function(e){return i("v-list-item",{key:e.title},[i("v-list-item-content",{on:{click:function(i){return t.getAddressInfo(e)}}},[i("v-list-item-title",[t._v(t._s(e.recipient)+" "+t._s(e.recipientPhoneNumber))]),i("v-list-item-subtitle",[t._v(t._s(e.province)+" "+t._s(e.city)+" "+t._s(e.region))])],1),i("v-list-item-content"),i("v-list-item-action",{staticStyle:{display:"flex","flex-direction":"row"}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"grey lighten-1"},on:{click:function(i){return t.delAddBtn(e)}}},[t._v("mdi-trash-can")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"grey lighten-1"},on:{click:function(i){return t.updateAddBtn(e)}}},[t._v("mdi-arrow-up")])],1)],1)],1)})),i("v-btn",{attrs:{width:"95%",rounded:""},on:{click:t.addBtn}},[t._v("添加地址")])],2)],1)},Et=[],Ut=i("b85c"),Rt={name:"Address",data:function(){return{items:[],items2:[],person:"个人信息",shuju:"",userMsg:{}}},created:function(){this.getAddUser()},methods:{getAddUser:function(){var t=this;this.items=[],this.items2=[];var e=localStorage.getItem("user");e=JSON.parse(e);var i={UserId:e.userId};console.log(i),A(i).then((function(e){console.log(e.data),t.items=e.data.data;var i,a=Object(Ut["a"])(e.data.data);try{for(a.s();!(i=a.n()).done;){var n=i.value;!0===n.isDefault&&t.items2.push(n)}}catch(s){a.e(s)}finally{a.f()}}))},getAddressInfo:function(t){console.log(t)},delAddBtn:function(t){var e=this;console.log("删除"),console.log(t);var i={id:t.id};console.log(i),O(i).then((function(t){console.log(t),e.getAddUser()}))},updateAddBtn:function(t){var e=this,i=t;i.isDefault=!0,console.log(i),z(i).then((function(t){console.log(t),e.getAddUser()}))},addBtn:function(){this.$router.push({path:"/home/addAddress"})}}},Ft=Rt,qt=Object(l["a"])(Ft,Mt,Et,!1,null,null,null),Yt=qt.exports;d()(qt,{VBtn:nt["a"],VDivider:lt["a"],VIcon:ct["a"],VList:Ot["a"],VListItem:Dt["a"],VListItemAction:jt["a"],VListItemContent:Lt["a"],VListItemSubtitle:Lt["b"],VListItemTitle:Lt["c"],VSubheader:Nt["a"]});var Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v(t._s(t.person))]),i("v-form",{ref:"form",staticStyle:{width:"80vw",margin:"0 auto"},attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{label:"姓名",required:""},model:{value:t.recipient,callback:function(e){t.recipient=e},expression:"recipient"}}),i("v-text-field",{attrs:{label:"电话号码",required:""},model:{value:t.recipientPhoneNumber,callback:function(e){t.recipientPhoneNumber=e},expression:"recipientPhoneNumber"}}),i("div",[i("v-select",{attrs:{items:t.provinceArea,label:"请选择省份",dense:"",outlined:""},on:{change:t.areaChange},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}}),i("v-select",{attrs:{items:t.cityArea,label:"请选择市",dense:"",outlined:""},on:{change:t.areaChange2},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}}),i("v-select",{attrs:{items:t.regionArea,label:"请选择区",dense:"",outlined:""},on:{change:t.areaChange3},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}})],1),i("v-text-field",{attrs:{label:"详细地址",required:""},model:{value:t.detailedAddress,callback:function(e){t.detailedAddress=e},expression:"detailedAddress"}}),i("v-text-field",{attrs:{label:"邮编",required:""},model:{value:t.postcode,callback:function(e){t.postcode=e},expression:"postcode"}}),i("v-row",{staticClass:"ml-1 mb-3"},[i("v-checkbox",{attrs:{label:"是否设置为默认地址",color:"orange",value:"1","hide-details":""},model:{value:t.isDefault,callback:function(e){t.isDefault=e},expression:"isDefault"}})],1),i("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.reset}},[t._v(" 取 消 ")]),i("v-btn",{attrs:{color:"warning"},on:{click:t.addBtn}},[t._v(" 确 定 ")])],1)],1)},Ht=[],Xt=i("ef6c"),Wt={name:"Address",data:function(){return{person:"个人信息",userMsg:{},valid:!0,address:null,items:["Item 1","Item 2","Item 3","Item 4"],checkbox:!1,recipient:"",recipientPhoneNumber:"",detailedAddress:"",postcode:"",area:Xt["regionData"],province:"",provinceArea:[],city:"",cityArea:[],region:"",regionArea:[],isDefault:"1"}},created:function(){this.showarea()},methods:{validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},getLocalStorageUser:function(){var t=localStorage.getItem("user");return t=JSON.parse(t),t},addBtn:function(){var t=this,e=this.getLocalStorageUser(),i={recipient:this.recipient,recipientPhoneNumber:this.recipientPhoneNumber,province:this.province,city:this.city,region:this.region,detailedAddress:this.detailedAddress,postcode:this.postcode,userId:e.userId};"1"===this.isDefault&&(i.isDefault=!0),console.log(i),S(i).then((function(e){console.log(e),t.$router.back()}))},showarea:function(){var t,e=[],i=Object(Ut["a"])(this.area);try{for(i.s();!(t=i.n()).done;){var a=t.value;e.push(a.label)}}catch(n){i.e(n)}finally{i.f()}this.provinceArea=e},areaChange:function(){var t=[];this.c=[];var e,i=Object(Ut["a"])(this.area);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(this.province===a.label){var n,s=Object(Ut["a"])(a.children);try{for(s.s();!(n=s.n()).done;){var o=n.value;t.push(o.label),this.c.push(o)}}catch(r){s.e(r)}finally{s.f()}}}}catch(r){i.e(r)}finally{i.f()}this.cityArea=t,this.region=""},areaChange2:function(){var t,e=[],i=Object(Ut["a"])(this.c);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(this.city===a.label){var n,s=Object(Ut["a"])(a.children);try{for(s.s();!(n=s.n()).done;){var o=n.value;e.push(o.label)}}catch(r){s.e(r)}finally{s.f()}}}}catch(r){i.e(r)}finally{i.f()}this.regionArea=e},areaChange3:function(){console.log(this.province+"-"+this.city+"-"+this.region)}}},Gt=Wt,Kt=i("ac7c"),Zt=i("4bd4"),Qt=i("b974"),te=Object(l["a"])(Gt,Jt,Ht,!1,null,null,null),ee=te.exports;d()(te,{VBtn:nt["a"],VCheckbox:Kt["a"],VForm:Zt["a"],VRow:dt["a"],VSelect:Qt["a"],VTextField:ht["a"]});var ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v(t._s(t.person))]),i("v-list",{attrs:{"two-line":"",subheader:""}},[i("v-subheader",{attrs:{inset:""}},[t._v("历史中奖记录")]),t._l(t.items,(function(e){return i("v-list-item",{key:e.title},[i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e.activityName)}}),i("v-list-item-subtitle",[t._v(t._s(e.prizeTierName)+" - "+t._s(e.prizeItemName))])],1),i("v-list-item-action",[i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"grey lighten-1"},on:{click:function(i){return t.crtlC(e)}}},[t._v("mdi-clipboard-text")])],1)],1)],1)}))],2)],1)},ae=[],ne={name:"Adward",data:function(){return{items:[],person:"个人信息",userMsg:{}}},created:function(){this.getLotteryWinningRecords()},methods:{getLotteryWinningRecords:function(){var t=this;this.items=[];var e=localStorage.getItem("user");e=JSON.parse(e);var i={UserId:e.userId};console.log(i),D(i).then((function(e){var i,a=e.data.data,n=Object(Ut["a"])(a);try{var s=function(){var e=i.value;console.log(e);var a={Id:e.prizeItemId},n={Id:e.prizeTierId},s={Id:e.activityId};J(a).then((function(i){var a=i.data.data;Z(n).then((function(i){var n=i.data.data;L(s).then((function(i){var s=i.data.data,o={activityId:s.id,activityName:s.name,lotteryDisplay:s.lotteryDisplay,prizeTierId:n.id,prizeTierName:n.name,prizeItemId:a.id,prizeItemName:a.name,date:e.date};0===a.credit?console.log("积分为0"):(console.log("积分不为0"),t.items.push(o))}))}))}))};for(n.s();!(i=n.n()).done;)s()}catch(o){n.e(o)}finally{n.f()}}))},crtlC:function(t){console.log(t)}}},se=ne,oe=Object(l["a"])(se,ie,ae,!1,null,null,null),re=oe.exports;d()(oe,{VBtn:nt["a"],VIcon:ct["a"],VList:Ot["a"],VListItem:Dt["a"],VListItemAction:jt["a"],VListItemContent:Lt["a"],VListItemSubtitle:Lt["b"],VListItemTitle:Lt["c"],VSubheader:Nt["a"]});var le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("v-row",{staticClass:"mt-10",attrs:{dense:""}},[i("v-col",{attrs:{cols:"12"}},[i("v-card",{attrs:{color:"#385F73",dark:""}},[i("v-card-title",{staticClass:"headline"},[t._v("活动list")])],1)],1),t._l(t.items,(function(e,a){return i("v-col",{key:a,attrs:{cols:"12"}},[i("v-card",{attrs:{color:e.color,dark:""}},[i("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[i("div",[i("v-card-title",{staticClass:"headline",domProps:{textContent:t._s(e.name)}}),i("v-card-subtitle",{staticStyle:{"font-size":"14px"}},[t._v("次数："+t._s(e.remainingDraws))]),i("v-card-actions",[i("v-btn",{attrs:{elevation:4,text:""},on:{click:function(i){return t.patchBtn(e)}}},[t._v("兑换")]),i("v-btn",{attrs:{elevation:4,text:""},on:{click:function(i){return t.postBtn(e)}}},[t._v("抽奖")])],1)],1),i("v-avatar",{staticClass:"ma-3",attrs:{size:"125",tile:""},on:{click:function(i){return t.activityBtn(e)}}},[i("v-img",{attrs:{src:e.src}})],1)],1)])],1)}))],2),i("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-toolbar",{attrs:{dark:"",color:t.msg.color}},[i("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-list",{attrs:{"three-line":"",subheader:""}},[i("v-subheader",[t._v("活动详情")]),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(t.msg.title))]),i("v-list-item-subtitle",[t._v(t._s(t.msg.subtitle))]),i("v-list-item-subtitle",[t._v("可抽奖次数："+t._s(t.msg.cishu))])],1)],1),i("v-btn",{staticStyle:{margin:"10px 10vw",color:"white"},attrs:{width:"80vw",color:t.msg.color}},[t._v("抽奖")]),i("v-divider"),i("v-img",{attrs:{src:t.msg.src}})],1)],1)],1)],1)},ce=[],de=i("5a0c"),ue=i.n(de),ve={name:"Playngs",data:function(){return{vm:{showDialog:!1},userMsg:{},wupin:[{id:1,name:"可乐",shu:100,weight:100},{id:2,name:"雪碧",shu:100,weight:100},{id:3,name:"铅笔",shu:50,weight:50},{id:4,name:"记事本",shu:10,weight:10}],addward:"",personid:"",randomNum:0,randomNum2:0,randomMsg:"",items:[{color:"#1F7087",src:"https://cdn.vuetifyjs.com/images/cards/foster.jpg",title:"活动1",subtitle:"转盘",content:"",cishu:"1"},{color:"#952175",src:"https://cdn.vuetifyjs.com/images/cards/halcyon.png",title:"活动2",subtitle:"刮刮卡",content:"",cishu:"2"}],dialog:!1,notifications:!1,sound:!0,widgets:!1,msg:{},info:[{name:"活动名称"}],colorItem:["#1F7087","#952175"]}},created:function(){this.fetchData(),this.getActAvailable(),this.getUserinfo()},watch:{$route:"fetchData"},methods:{getLocalStorageUser:function(){var t=localStorage.getItem("user");return t=JSON.parse(t),t},postBtn:function(t){var e=this;console.log("抽奖"),console.log(t);var i=this.getLocalStorageUser();console.log(i);var a={channelCode:i.login_channel,lotteryDisplay:t.lotteryDisplay,userId:i.userId,activityId:t.activityId,count:1};console.log(a),j(a).then((function(t){console.log(t),e.getActAvailable()}))},patchBtn:function(t){var e=this;console.log(t),console.log("兑换抽奖次数");var i=this.getLocalStorageUser(),a={activityId:t.activityId,userId:i.userId,count:1,unitPrice:1,reason:"抽奖兑换次数"};console.log(a),U(a).then((function(t){console.log(t),e.getActAvailable()}))},deleteUserBtn:function(){var t=this.getLocalStorageUser(),e={id:t.userId};console.log(e),V(e).then((function(t){console.log(t)}))},activityBtn:function(t){console.log(t),this.dialog=!0,this.msg=t},guaBtn:function(){this.$router.push({path:"/home/gua"})},closeBtn:function(){this.vm.showDialog=!1},dec:function(){var t=0;console.log(t)},startC:function(){var t,e=document.getElementById("pointer"),i=Math.floor(10*Math.random()+1);console.log(i),t=3600,e.style.transform="rotate("+t+"deg)",e.style.transition="all 4s ease 0.5s"},getLS:function(){T().then((function(t){if(t){console.log("userid:"),console.log(t);var e={userId:t.data.sub};e=JSON.stringify(e),localStorage.setItem("user",e)}else console.log("刷新")}))},getActAvailable:function(){var t=this;this.info=[];var e=ue()().format("YYYY-MM-DD"),i={startTime:e,AvailableChannels:"ngs,ngsplaza,alldays"};i=JSON.stringify(i),i=JSON.parse(i),N(i).then((function(t){console.log(t.data.data)}));var a=this.getLocalStorageUser(),n={userId:a.userId,availableChannel:a.login_channel};E(n).then((function(e){console.log(e);var i={userId:a.userId,availableChannel:a.login_channel};M(i).then((function(e){var i,a=Object(Ut["a"])(e.data.data);try{var n=function(){var e=i.value,a={Id:e.activityId};L(a).then((function(i){var a=i.data.data,n={activityId:a.id,name:a.name,availableChannels:a.availableChannels,activityType:a.activityType,lotteryDisplay:a.lotteryDisplay,startTime:a.startTime,endTime:a.endTime,activityCode:a.activityCode,userId:e.userId,usedDraws:e.usedDraws,todayUsedDraws:e.todayUsedDraws,remainingDraws:e.remainingDraws,attendanceDays:e.attendanceDays,sequentialAttendanceDays:e.sequentialAttendanceDays,lastAttendanceDate:e.lastAttendanceDate};t.info.push(n);var s=t.info.length,o=s%2;t.info[s-1].color=t.colorItem[o],t.items=t.info}))};for(a.s();!(i=a.n()).done;)n()}catch(s){a.e(s)}finally{a.f()}}))}))},getUserinfo:function(){var t=this.getLocalStorageUser(),e={id:t.userId};console.log(e),P(e).then((function(t){console.log("获取到的用户数据"),console.log(t)}))},getAdward:function(){var t=this.wupin,e=0,i=0;for(e;e<t.length;e++)i+=t[e].shu;var a=Math.floor(Math.random()*i)+1,n=0;for(e=0;e<t.length;e++)if(n+=t[e].shu,a<=n){this.addward=t[e].name;break}this.randomNum=a},getRandom:function(){var t=Math.floor(100*Math.random());this.randomNum2=t,t<=80?(this.randomMsg="没中奖...",this.randomNum=0,this.addward=""):t>80&&t<=100&&(this.randomMsg="中奖了！",this.getAdward())},fetchData:function(){this.personid=this.$route.params.id}}},me=ve,he=i("8212"),pe=i("169a"),fe=i("adda"),ge=i("71d9"),be=Object(l["a"])(me,le,ce,!1,null,"89b43276",null),ye=be.exports;d()(be,{VAvatar:he["a"],VBtn:nt["a"],VCard:st["a"],VCardActions:ot["a"],VCardSubtitle:ot["b"],VCardTitle:ot["d"],VCol:rt["a"],VDialog:pe["a"],VDivider:lt["a"],VIcon:ct["a"],VImg:fe["a"],VList:Ot["a"],VListItem:Dt["a"],VListItemContent:Lt["a"],VListItemSubtitle:Lt["b"],VListItemTitle:Lt["c"],VRow:dt["a"],VSubheader:Nt["a"],VToolbar:ge["a"]});var xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("h1",[t._v("A beautiful parrot got trapped behind some paper.")]),a("h2",[t._v("Scratch them free!")]),a("vue-scratchable",{attrs:{brushOptions:t.brush,hideOptions:t.hide,getPercentageCleared:""},on:{percentageUpdate:t.updatePoints},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.init;return[a("div",{staticClass:"wrapper"},[a("img",{attrs:{alt:"图片加载中...",src:i("f80f")},on:{load:function(t){return n()}}}),a("h3",[t._v(t._s(t.subline))])])]}}])}),a("p",[t._v("You scratched "+t._s(t.percentage)+"% free.")])],1)},Ie=[],_e=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-scratchable-wrapper"},[t._t("default",null,{init:t.init}),i("canvas",{on:{mousedown:t.mouseDown,mousemove:t.mouseMove,touchstart:t.touchDown,touchmove:t.touchMove}})],2)},ke=[],we=i("3835"),Ce=i("1da1"),Te=(i("96cf"),i("a9e3"),i("99af"),i("38cf"),i("b047")),Pe=i.n(Te),Ve={name:"VueScratchable",props:{brushOptions:{type:Object,default:function(){return{size:20,shape:"round"}}},hideOptions:{type:Object,default:function(){return{type:"color",value:"#dadada"}}},getPercentageCleared:{type:Boolean,default:!1},percentageStride:{type:Number,default:150}},data:function(){return{canvas:null,context:null,isPressed:!1,offset:{top:0,left:0},position:{currX:0,currY:0,lastX:0,lastY:0},observer:null,initFlag:!1}},mounted:function(){var t=this;this.canvas=this.$el.querySelector("canvas");var e=Pe()((function(){return t.init()}),200);this.observer=new MutationObserver((function(i){i.forEach((function(i){var a=i.attributeName;!t.initFlag&&a&&e()}))})),this.observer.observe(this.$el,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),window.addEventListener("mouseup",this.mouseUp,!1),window.addEventListener("touchend",this.touchUp,!1),window.addEventListener("touchcancel",this.touchUp,!1),this.init(),window.addEventListener("resize",Pe()(this.init,500))},destroyed:function(){window.removeEventListener("mouseup",this.mouseUp),window.removeEventListener("touchend",this.touchUp),window.removeEventListener("touchcancel",this.touchUp),window.removeEventListener("resize",Pe()(this.init,500)),this.observer.disconnect()},methods:{init:function(){var t=this;this.initFlag=!0,this.setCanvasSizeAndContext(),this.$nextTick((function(){return t.fillArea()}))},setCanvasSizeAndContext:function(){var t=this;this.$nextTick((function(){var e=t.$el.getBoundingClientRect(),i=e.width,a=e.height;t.canvas.width=Math.ceil(i),t.canvas.height=Math.ceil(a),t.context=t.canvas.getContext("2d")}))},setOffsets:function(){var t=this.canvas.getBoundingClientRect(),e=t.top,i=t.left;this.offset.top=e+document.body.scrollTop,this.offset.left=i+document.body.scrollLeft},fillArea:function(){var t=this;return Object(Ce["a"])(regeneratorRuntime.mark((function e(){var i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.context.canvas,a=i.width,n=i.height,e.next=3,t.setFillStyle().catch((function(t){console.error(" Failed to load image!\n            Error: ".concat(t.name,"\n            Message: ").concat(t.message,"\n          "))}));case 3:t.context.fillRect(0,0,a,n),t.initFlag=!1;case 5:case"end":return e.stop()}}),e)})))()},setFillStyle:function(){var t=this,e=this.hideOptions,i=e.type,a=e.value,n=void 0===a?"":a,s=e.src,o=void 0===s?"":s,r=e.repeat,l=void 0===r?"":r;return this.context.globalCompositeOperation="source-over",new Promise("color"===i?function(e){return e(t.context.fillStyle=n)}:function(e,i){var a=new Image;a.onload=function(){t.context.fillStyle=t.context.createPattern(a,l),e(a)},a.onerror=function(t){return i(t)},a.src=o})},clearArea:function(){var t=this.context.canvas,e=t.width,i=t.height;this.context.globalCompositeOperation="destination-out",this.context.fillRect(0,0,e,i)},draw:function(){var t=this.position,e=t.currX,i=t.currY,a=t.lastX,n=t.lastY;this.context.beginPath(),this.context.globalCompositeOperation="destination-out",this.context.lineWidth=this.brushOptions.size,this.context.lineJoin=this.brushOptions.shape,this.context.moveTo(a,n),this.isPressed?this.context.lineTo(e,i):this.context.lineTo(e+.01,i+.01),this.context.closePath(),this.context.stroke(),this.lastPositionHelper(e,i),this.calculateClearedArea()},lastPositionHelper:function(t,e){this.position.lastX=t,this.position.lastY=e},currentPositionHelper:function(t,e){this.position.currX=t-this.offset.left,this.position.currY=e-this.offset.top},mouseDown:function(t){var e=t.clientX,i=t.clientY;this.setOffsets(),this.currentPositionHelper(e,i),this.lastPositionHelper(this.position.currX,this.position.currY),this.draw(),this.isPressed=!0},mouseMove:function(t){var e=t.clientX,i=t.clientY;this.isPressed&&(this.currentPositionHelper(e,i),this.draw())},mouseUp:function(){this.isPressed=!1},touchDown:function(t){var e=Object(we["a"])(t.targetTouches,1),i=e[0],a=i.clientX,n=i.clientY;this.setOffsets(),this.currentPositionHelper(a,n),this.lastPositionHelper(this.position.currX,this.position.currY),this.draw(),this.isPressed=!0},touchMove:function(t){t.preventDefault();var e=Object(we["a"])(t.targetTouches,1),i=e[0],a=i.clientX,n=i.clientY;this.currentPositionHelper(a,n),this.draw()},touchUp:function(){this.isPressed=!1},calculateClearedArea:function(){if(this.getPercentageCleared){for(var t=this.context.canvas,e=t.width,i=t.height,a=this.context.getImageData(0,0,e,i),n=a.data,s=a.data.length,o=s/this.percentageStride,r=0,l=r;l<s;l+=this.percentageStride)0===parseInt(n[l],10)&&(r+=1);this.$emit("percentage-update",Math.round(r/o*100))}}}},Ae=Ve,Se=(i("4cb4"),Object(l["a"])(Ae,_e,ke,!1,null,"047af992",null)),ze=Se.exports,Oe=i("1505"),De=i.n(Oe),je={name:"Gua",components:{VueScratchable:ze},computed:{subline:function(){return this.percentage<100?"🎉 There is still ".concat(100-this.percentage,"% left for me to be free... 🎉"):"💚 Thank you for scratching me free! 💚"}},data:function(){return{percentage:0,hide:{type:"pattern",src:De.a,repeat:"repeat"},brush:{size:60,shape:"round"}}},methods:{updatePoints:function(t){this.percentage=t}}},Le=je,Ne=(i("8b42"),Object(l["a"])(Le,xe,Ie,!1,null,null,null)),$e=Ne.exports,Be=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Me=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",[t._v("123")]),i("div",[t._v("123")]),i("div",[t._v("123")]),i("div",{staticClass:"turnplate_box"},[i("canvas",{attrs:{id:"myCanvas",width:"300px",height:"300px"}},[t._v("抱歉！浏览器不支持。")]),i("canvas",{attrs:{id:"myCanvas01",width:"200px",height:"200px"}},[t._v("抱歉！浏览器不支持。")]),i("canvas",{attrs:{id:"myCanvas03",width:"200px",height:"200px"}},[t._v("抱歉！浏览器不支持。")]),i("canvas",{attrs:{id:"myCanvas02",width:"150px",height:"150px"}},[t._v("抱歉！浏览器不支持。")]),i("button",{staticClass:"turnplatw_btn",attrs:{id:"tupBtn"}})])])}],Ee=(i("cb29"),{name:"Zhuan",computed:{},data:function(){return{}},methods:{ready:function(){var t,e=5,i=0,a=null,n=["#626262","#787878","rgba(0,0,0,0.5)","#DCC722","white","#FF4350"],s=["谢谢参与","  1000","   10","  500","  100"," 4999","    1","   20"],o=["再接再厉","      元","     元","  淘金币","     元","  淘金币","     元","  淘金币"];d();var r=document.getElementById("tupBtn");function l(){c();var e="rotate("+t+"deg)",i=document.getElementById("myCanvas");i.css("-o-transform",e),i.css("-ms-transform",e),i.css("-moz-transform",e),i.css("-webkit-transform",e),i.css("transform",e)}function c(){var e=parseInt(7*Math.random()+0);0==e?(t=2160*i+1800,a=s[0]+o[0]):1==e?(t=2160*i+1845,a=s[7]+o[7]):2==e?(t=2160*i+1890,a=s[6]+o[6]):3==e?(t=2160*i+1935,a=s[5]+o[5]):4==e?(t=2160*i+1980,a=s[4]+o[4]):5==e?(t=2160*i+2025,a=s[3]+o[3]):6==e?(t=2160*i+2070,a=s[2]+o[2]):7==e&&(t=2160*i+2115,a=s[1]+o[1])}function d(){var t=document.getElementById("myCanvas"),e=document.getElementById("myCanvas01"),i=document.getElementById("myCanvas03"),a=document.getElementById("myCanvas02"),r=t.getContext("2d"),l=e.getContext("2d"),c=i.getContext("2d"),d=a.getContext("2d");function u(){for(var t=0,e=0,i=0;i<8;i++)t=Math.PI*(i/4-1/8),e=t+Math.PI*(1/4),r.save(),r.beginPath(),r.arc(150,150,100,t,e,!1),r.lineWidth=120,r.strokeStyle=i%2==0?n[0]:n[1],r.stroke(),r.restore()}function v(){r.textAlign="start",r.textBaseline="middle",r.fillStyle=n[3];for(var t=2*Math.PI/8,e=0;e<8;e++)r.save(),r.beginPath(),r.translate(150,150),r.rotate(e*t),r.font=" 20px Microsoft YaHei",r.fillStyle=n[3],r.fillText(s[e],-30,-115,60),r.font=" 14px Microsoft YaHei",r.fillText(o[e],-30,-95,60),r.closePath(),r.restore()}function m(){l.beginPath(),l.moveTo(100,24),l.lineTo(90,62),l.lineTo(110,62),l.lineTo(100,24),l.fillStyle=n[5],l.fill(),l.closePath(),c.beginPath(),c.arc(100,100,40,0,2*Math.PI,!1),c.fillStyle=n[5],c.fill(),c.closePath(),c.font="Bold 20px Microsoft YaHei",c.textAlign="start",c.textBaseline="middle",c.fillStyle=n[4],c.beginPath(),c.fillText("开始",80,90,40),c.fillText("抽奖",80,110,40),c.fill(),c.closePath(),d.beginPath(),d.arc(75,75,75,0,2*Math.PI,!1),d.fillStyle=n[2],d.fill(),d.closePath()}u(),v(),m()}r.bind("click",(function(){e>=1?(e-=1,l(),r.attr("disabled",!0),i+=1,setTimeout((function(){alert(a),r.removeAttr("disabled",!0)}),6e3)):alert("亲，抽奖次数已用光！")}))}}}),Ue=Ee,Re=(i("2ae2"),Object(l["a"])(Ue,Be,Me,!1,null,null,null)),Fe=Re.exports,qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-navigation-drawer",{attrs:{absolute:"",width:"225px"}},[i("v-row",{staticClass:"fill-height",attrs:{"no-gutters":""}},[i("v-navigation-drawer",{attrs:{"mini-variant":"",permanent:"",src:t.bg,dark:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[i("v-list",{staticClass:"py-0",attrs:{dense:""}},[i("v-list-item",{class:"px-0"},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-list-item-avatar",t._g(t._b({staticStyle:{margin:"10px auto"},attrs:{dark:""}},"v-list-item-avatar",n,!1),a),[i("img",{attrs:{alt:"wutu",src:"https://randomuser.me/api/portraits/men/81.jpg"}})])]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-card",[i("v-list",[i("v-list-item",[i("v-list-item-avatar",[i("img",{attrs:{src:"https://randomuser.me/api/portraits/men/81.jpg",alt:"John"}})]),i("v-list-item-content",[i("v-list-item-title",[t._v("陈鸿炜")]),i("v-list-item-subtitle",[t._v("管理员")])],1),i("v-list-item-action",[i("v-btn",{class:t.fav?"red--text":"",attrs:{icon:""},on:{click:function(e){t.fav=!t.fav}}},[i("v-icon",[t._v("mdi-heart")])],1)],1)],1)],1),i("v-divider"),i("v-list",[i("v-list-item",[i("v-list-item-action",[i("v-switch",{attrs:{color:"purple"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),i("v-list-item-title",[t._v("Enable messages")])],1),i("v-list-item",[i("v-list-item-action",[i("v-switch",{attrs:{color:"purple"},model:{value:t.hints,callback:function(e){t.hints=e},expression:"hints"}})],1),i("v-list-item-title",[t._v("Enable hints")])],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{text:""},on:{click:function(e){t.menu=!1}}},[t._v("退 出")]),i("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.menu=!1}}},[t._v("关 闭")])],1)],1)],1)],1),i("v-divider"),t._l(t.items,(function(e){return i("v-list-item",{key:e.title,attrs:{link:""}},[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,s=a.attrs;return[i("v-list-item-icon",t._g(t._b({attrs:{color:"primary",dark:""}},"v-list-item-icon",s,!1),n),[i("v-icon",{on:{click:function(i){return t.changeList(e)}}},[t._v(t._s(e.icon))])],1)]}}],null,!0)},[i("span",[t._v(t._s(e.title))])]),i("v-list-item-icon",[i("v-icon",[t._v(t._s(e.icon))])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e.title))])],1)],1)}))],2)],1),"用户管理"===this.submenu?i("v-list",{attrs:{dense:"",nav:""}},[i("v-subheader",{staticStyle:{"font-size":"17px","font-weight":"700"}},[t._v(t._s(this.submenu))]),i("v-list-item-group",{attrs:{color:"blue"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}},t._l(t.dashboardmenu,(function(e){return i("v-list-item",{key:e.subtitle},[i("v-list-item-icon",{on:{click:function(i){return t.routerClick(e)}}},[i("v-icon",{attrs:{medium:""}},[t._v("mdi-chevron-right")]),i("span",{staticStyle:{"font-size":"14px","line-height":"180%"}},[t._v(t._s(e.subtitle))])],1)],1)})),1)],1):t._e(),"抽奖管理"===this.submenu?i("v-list",{attrs:{dense:"",nav:""}},[i("v-subheader",{staticStyle:{"font-size":"17px","font-weight":"700"}},[t._v(t._s(this.submenu))]),i("v-list-item-group",{attrs:{color:"blue"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}},t._l(t.photosmenu,(function(e){return i("v-list-item",{key:e.subtitle},[i("v-list-item-icon",{on:{click:function(i){return t.routerClick(e)}}},[i("v-icon",{attrs:{medium:""}},[t._v("mdi-chevron-right")]),i("span",{staticStyle:{"font-size":"14px","line-height":"180%"}},[t._v(t._s(e.subtitle))])],1)],1)})),1)],1):t._e(),"奖品管理"===this.submenu?i("v-list",{attrs:{dense:"",nav:""}},[i("v-subheader",{staticStyle:{"font-size":"17px","font-weight":"700"}},[t._v(t._s(this.submenu))]),i("v-list-item-group",{attrs:{color:"blue"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}},t._l(t.aboutmenu,(function(e){return i("v-list-item",{key:e.subtitle},[i("v-list-item-icon",{on:{click:function(i){return t.routerClick(e)}}},[i("v-icon",{attrs:{medium:""}},[t._v("mdi-chevron-right")]),i("span",{staticStyle:{"font-size":"14px","line-height":"180%"}},[t._v(t._s(e.subtitle))])],1)],1)})),1)],1):t._e()],1)],1),i("v-main",{staticStyle:{"margin-left":"245px","margin-top":"20px"}},[i("router-view")],1)],1)},Ye=[],Je={name:"Layout",data:function(){return{drawer:!0,items:[{title:"用户管理",icon:"mdi-view-dashboard"},{title:"抽奖管理",icon:"mdi-image"},{title:"奖品管理",icon:"mdi-help-box"}],submenu:"用户管理",dashboardmenu:[{subtitle:"Home1",id:"person"},{subtitle:"用户管理"},{subtitle:"Settings"}],photosmenu:[{subtitle:"添加活动",id:"addActivity"},{subtitle:"活动管理",id:"manageActivity"}],aboutmenu:[{subtitle:"添加商品",id:"addProd"},{subtitle:"奖品管理",id:"manageProd"}],miniVariant:!0,background:!0,item:[{text:"用户管理",disabled:!1,href:"breadcrumbs_dashboard"},{text:"Link 1",disabled:!1,href:"breadcrumbs_link_1"},{text:"Link 2",disabled:!0,href:"breadcrumbs_link_2"}],links:["Home","Contacts","Settings"],fav:!0,menu:!1,message:!1,hints:!0}},computed:{bg:function(){return this.background?"https://cdn.vuetifyjs.com/images/backgrounds/bg-2.jpg":void 0}},methods:{changeList:function(t){console.log(t.title),this.submenu=t.title},routerClick:function(t){if(console.log(t),t.id){console.log("1");var e="/management/"+t.id;console.log(e),this.$router.push({path:e})}}}},He=Je,Xe=i("8270"),We=i("1baa"),Ge=i("34c3"),Ke=i("e449"),Ze=i("f774"),Qe=i("b73d"),ti=Object(l["a"])(He,qe,Ye,!1,null,null,null),ei=ti.exports;d()(ti,{VApp:u["a"],VBtn:nt["a"],VCard:st["a"],VCardActions:ot["a"],VDivider:lt["a"],VIcon:ct["a"],VList:Ot["a"],VListItem:Dt["a"],VListItemAction:jt["a"],VListItemAvatar:Xe["a"],VListItemContent:Lt["a"],VListItemGroup:We["a"],VListItemIcon:Ge["a"],VListItemSubtitle:Lt["b"],VListItemTitle:Lt["c"],VMain:v["a"],VMenu:Ke["a"],VNavigationDrawer:Ze["a"],VRow:dt["a"],VSpacer:mt["a"],VSubheader:Nt["a"],VSwitch:Qe["a"],VTooltip:pt["a"]});var ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v(t._s(t.person))]),i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{label:"活动名称",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("v-subheader",[t._v("活动类型：")]),i("v-row",{staticClass:"ml-1 mb-3"},[i("v-checkbox",{attrs:{label:"抽奖活动",color:"orange",value:"Lottery","hide-details":""},model:{value:t.activityType,callback:function(e){t.activityType=e},expression:"activityType"}}),i("v-checkbox",{staticClass:"ml-5",attrs:{label:"签到活动",color:"orange darken-3",value:"SingleAttendance","hide-details":""},model:{value:t.activityType,callback:function(e){t.activityType=e},expression:"activityType"}}),i("v-checkbox",{staticClass:"ml-5",attrs:{label:"连续签到活动",color:"orange darken-6",value:"SequentialAttendance","hide-details":""},model:{value:t.activityType,callback:function(e){t.activityType=e},expression:"activityType"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"Lottery"===this.activityType,expression:"this.activityType === 'Lottery'"}]},[i("v-row",{staticClass:"ml-1 mb-3"},[i("v-checkbox",{attrs:{label:"转盘",color:"orange",value:"Roulette","hide-details":""},model:{value:t.lotteryDisplay,callback:function(e){t.lotteryDisplay=e},expression:"lotteryDisplay"}}),i("v-checkbox",{staticClass:"ml-5",attrs:{label:"寻宝",color:"orange darken-3",value:"Digging","hide-details":""},model:{value:t.lotteryDisplay,callback:function(e){t.lotteryDisplay=e},expression:"lotteryDisplay"}}),i("v-checkbox",{staticClass:"ml-5",attrs:{label:"刮刮乐",color:"orange darken-6",value:"Scratchcard","hide-details":""},model:{value:t.lotteryDisplay,callback:function(e){t.lotteryDisplay=e},expression:"lotteryDisplay"}})],1)],1),i("v-subheader",[t._v("活动渠道：")]),i("v-row",{staticClass:"ml-1 mb-3"},[i("v-checkbox",{attrs:{label:"ngs",color:"orange",value:"ngs","hide-details":""},model:{value:t.availableChannels,callback:function(e){t.availableChannels=e},expression:"availableChannels"}}),i("v-checkbox",{staticClass:"ml-5",attrs:{label:"ngsplaza",color:"orange darken-3",value:"ngsplaza","hide-details":""},model:{value:t.availableChannels,callback:function(e){t.availableChannels=e},expression:"availableChannels"}}),i("v-checkbox",{staticClass:"ml-5",attrs:{label:"alldays",color:"orange darken-6",value:"alldays","hide-details":""},model:{value:t.availableChannels,callback:function(e){t.availableChannels=e},expression:"availableChannels"}})],1),i("v-subheader",[t._v("时间设置：")]),i("v-row",{staticClass:"ml-1 mb-3"},[i("v-checkbox",{attrs:{label:"开始时间",color:"orange",value:"st","hide-details":""},model:{value:t.timeType,callback:function(e){t.timeType=e},expression:"timeType"}}),i("v-checkbox",{staticClass:"ml-5",attrs:{label:"开始时间-结束时间",color:"orange darken-3",value:"st-et","hide-details":""},model:{value:t.timeType,callback:function(e){t.timeType=e},expression:"timeType"}})],1),i("v-row",{staticClass:"ml-1 mb-3"},[i("v-col",{directives:[{name:"show",rawName:"v-show",value:"st"===this.timeType||"st-et",expression:"this.timeType === 'st' || 'st-et'"}],attrs:{cols:"12",sm:"6",md:"4"}},[i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.startTime,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.startTime=e},"update:return-value":function(e){t.startTime=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-text-field",t._g(t._b({attrs:{label:"活动开始时间","prepend-icon":"mdi-calendar-blank",readonly:""},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}},"v-text-field",n,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.startTime)}}},[t._v("OK")])],1)],1)],1),i("v-col",{directives:[{name:"show",rawName:"v-show",value:"st-et"===this.timeType,expression:"this.timeType === 'st-et'"}],attrs:{cols:"12",sm:"6",md:"4"}},[i("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":t.endTime,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.endTime=e},"update:return-value":function(e){t.endTime=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-text-field",t._g(t._b({attrs:{label:"活动结束时间","prepend-icon":"mdi-calendar-blank",readonly:""},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}},"v-text-field",n,!1),a))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[i("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu2=!1}}},[t._v("Cancel")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu2.save(t.endTime)}}},[t._v("OK")])],1)],1)],1)],1),i("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.reset}},[t._v(" 取 消 ")]),i("v-btn",{attrs:{color:"warning"},on:{click:t.addActivity}},[t._v(" 确 定 ")])],1)],1)},ai=[],ni=(i("a434"),{name:"AddActivity",data:function(){return{person:"添加活动",userMsg:{},valid:!0,email:"",select:null,items:["Item 1","Item 2","Item 3","Item 4"],checkbox:!1,name:"",lotteryDisplay:"Roulette",availableChannels:[],activityType:"Lottery",timeType:"st",startTime:(new Date).toISOString().substr(0,10),menu:!1,endTime:null,menu2:!1,dialog:!1,headers:[{text:"奖励等级",align:"start",value:"level"},{text:"概率",value:"carbs"},{text:"奖励名称",value:"acid"},{text:"图片",value:"fat"},{text:"操作",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{level:"",acid:0,fat:null,carbs:0,protein:0,index:0},defaultItem:{level:"",acid:0,fat:0,carbs:0,protein:0,index:0},expanded:[],singleExpand:!0,channelCode:0}},created:function(){this.initialize()},computed:{formTitle:function(){return-1===this.editedIndex?"添加":"修改"}},watch:{dialog:function(t){t||this.close()}},methods:{addActivity:function(){var t=this;"Lottery"!==this.activityType&&(this.lotteryDisplay="None");var e={name:this.name,availableChannels:this.availableChannels,lotteryDisplay:this.lotteryDisplay,activityType:this.activityType,startTime:this.startTime,endTime:this.endTime};console.log(e),$(e).then((function(e){console.log(e),console.log(e.data.data.id);var i=e.data.data,a={id:i.id,name:i.name,availableChannels:i.availableChannels,lotteryDisplay:i.lotteryDisplay,startTime:i.startTime,endTime:i.endTime};t.$router.push({path:"/management/addPrizeTier",query:a})}))},validate:function(){},reset:function(){confirm("cancel")},resetValidation:function(){confirm("sure")},initialize:function(){this.desserts=[{level:"特等奖",acid:159,index:0},{level:"二等奖",acid:237,index:2},{level:"一等奖",acid:237,index:1},{level:"三等奖",acid:999,index:3}]},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this.desserts.indexOf(t);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(e,1)},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){"特等奖"===this.editedItem.level?this.editedItem.index=0:"一等奖"===this.editedItem.level?this.editedItem.index=1:"二等奖"===this.editedItem.level?this.editedItem.index=2:"三等奖"===this.editedItem.level&&(this.editedItem.index=3),this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()}}}),si=ni,oi=i("2e4b"),ri=Object(l["a"])(si,ii,ai,!1,null,null,null),li=ri.exports;d()(ri,{VBtn:nt["a"],VCheckbox:Kt["a"],VCol:rt["a"],VDatePicker:oi["a"],VForm:Zt["a"],VMenu:Ke["a"],VRow:dt["a"],VSpacer:mt["a"],VSubheader:Nt["a"],VTextField:ht["a"]});var ci=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v(t._s(t.person))]),i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{label:"商品名称",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("v-subheader",[t._v("商品类型：")]),i("v-row",{staticClass:"ml-1 mb-3"},[i("v-checkbox",{attrs:{label:"积分奖励",color:"orange",value:"Credit","hide-details":""},model:{value:t.prizeType,callback:function(e){t.prizeType=e},expression:"prizeType"}}),i("v-checkbox",{staticClass:"ml-5",attrs:{label:"优惠券兑换码",color:"orange darken-3",value:"Coupon","hide-details":""},model:{value:t.prizeType,callback:function(e){t.prizeType=e},expression:"prizeType"}}),i("v-checkbox",{staticClass:"ml-5",attrs:{label:"实物奖励",color:"orange darken-6",value:"Physical","hide-details":""},model:{value:t.prizeType,callback:function(e){t.prizeType=e},expression:"prizeType"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"Credit"===this.prizeType,expression:"this.prizeType === 'Credit'"}]},[i("v-row",{staticClass:"ml-1 mb-3"},[i("v-text-field",{attrs:{label:"积分",required:""},model:{value:t.credit,callback:function(e){t.credit=e},expression:"credit"}})],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"Coupon"===this.prizeType,expression:"this.prizeType === 'Coupon'"}]},[i("v-row",{staticClass:"ml-1 mb-3"},[i("v-text-field",{attrs:{label:"优惠券兑换码",required:""},model:{value:t.couponActiveCode,callback:function(e){t.couponActiveCode=e},expression:"couponActiveCode"}})],1)],1),i("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.reset}},[t._v(" 取 消 ")]),i("v-btn",{attrs:{color:"warning"},on:{click:t.addProd}},[t._v(" 确 定 ")])],1)],1)},di=[],ui={name:"AddProd",data:function(){return{person:"添加商品",userMsg:{},valid:!0,email:"",select:null,items:["Item 1","Item 2","Item 3","Item 4"],checkbox:!1,name:"",lotteryDisplay:"Roulette",availableChannels:[],prizeType:"Credit",timeType:"st",startTime:(new Date).toISOString().substr(0,10),menu:!1,endTime:null,menu2:!1,dialog:!1,headers:[{text:"奖励等级",align:"start",value:"level"},{text:"概率",value:"carbs"},{text:"奖励名称",value:"acid"},{text:"图片",value:"fat"},{text:"操作",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{level:"",acid:0,fat:null,carbs:0,protein:0,index:0},defaultItem:{level:"",acid:0,fat:0,carbs:0,protein:0,index:0},expanded:[],singleExpand:!0,channelCode:0}},created:function(){this.initialize()},computed:{formTitle:function(){return-1===this.editedIndex?"添加":"修改"}},watch:{dialog:function(t){t||this.close()}},methods:{addProd:function(){"Credit"!==this.prizeType&&(this.credit=null),"Coupon"!==this.prizeType&&(this.couponActiveCode=null);var t={name:this.name,prizeType:this.prizeType,couponActiveCode:this.couponActiveCode,credit:this.credit,categoryName:"other",brandName:"other"};console.log(t),q(t).then((function(t){console.log(t)}))},validate:function(){},reset:function(){confirm("cancel")},resetValidation:function(){confirm("sure")},initialize:function(){this.desserts=[{level:"特等奖",acid:159,index:0},{level:"二等奖",acid:237,index:2},{level:"一等奖",acid:237,index:1},{level:"三等奖",acid:999,index:3}]},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this.desserts.indexOf(t);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(e,1)},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){"特等奖"===this.editedItem.level?this.editedItem.index=0:"一等奖"===this.editedItem.level?this.editedItem.index=1:"二等奖"===this.editedItem.level?this.editedItem.index=2:"三等奖"===this.editedItem.level&&(this.editedItem.index=3),this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()}}},vi=ui,mi=Object(l["a"])(vi,ci,di,!1,null,null,null),hi=mi.exports;d()(mi,{VBtn:nt["a"],VCheckbox:Kt["a"],VForm:Zt["a"],VRow:dt["a"],VSubheader:Nt["a"],VTextField:ht["a"]});var pi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("v-card",[i("v-card-title",[i("v-toolbar-title",[t._v("活动管理")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-data-table",{staticStyle:{"margin-top":"-10px"},attrs:{headers:t.headers,items:t.desserts,"sort-by":"calories",search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("活动修改")])]),i("v-card-text",[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[i("v-text-field",{attrs:{label:"活动名称"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[i("v-text-field",{attrs:{label:"活动类型"},model:{value:t.editedItem.activityType,callback:function(e){t.$set(t.editedItem,"activityType",e)},expression:"editedItem.activityType"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[i("v-text-field",{attrs:{label:"抽奖渠道"},model:{value:t.editedItem.availableChannels,callback:function(e){t.$set(t.editedItem,"availableChannels",e)},expression:"editedItem.availableChannels"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[i("v-text-field",{attrs:{label:"抽奖方式"},model:{value:t.editedItem.lotteryDisplay,callback:function(e){t.$set(t.editedItem,"lotteryDisplay",e)},expression:"editedItem.lotteryDisplay"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[i("v-text-field",{attrs:{label:"开始时间"},model:{value:t.editedItem.startTime,callback:function(e){t.$set(t.editedItem,"startTime",e)},expression:"editedItem.startTime"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[i("v-text-field",{attrs:{label:"结束时间"},model:{value:t.editedItem.endTime,callback:function(e){t.$set(t.editedItem,"endTime",e)},expression:"editedItem.endTime"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[i("v-icon",{directives:[{name:"show",rawName:"v-show",value:"Lottery"===a.activityType,expression:"item.activityType === 'Lottery'"}],staticClass:"mr-2",attrs:{color:"primary"},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),i("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.getAct(a)}}},[t._v(" mdi-clipboard-list ")]),i("v-icon",{staticClass:"mr-2",attrs:{color:"red"},on:{click:function(e){return t.delAct(a)}}},[t._v(" mdi-delete ")])]}}])})],1),i("v-dialog",{attrs:{"max-width":"800px"},model:{value:t.dialogProd,callback:function(e){t.dialogProd=e},expression:"dialogProd"}},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headersProd,items:t.dessertsProd,"sort-by":"calories"},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[t._v("添加活动档次 - 奖品")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),a),[t._v("New Item")])]}}]),model:{value:t.dialogProdAdd,callback:function(e){t.dialogProdAdd=e},expression:"dialogProdAdd"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),i("v-card-text",[i("v-container",[i("v-col",[i("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[i("v-text-field",{attrs:{label:"活动档次"},model:{value:t.editedItemProd.name,callback:function(e){t.$set(t.editedItemProd,"name",e)},expression:"editedItemProd.name"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[i("v-text-field",{attrs:{label:"活动概率"},model:{value:t.editedItemProd.percentage,callback:function(e){t.$set(t.editedItemProd,"percentage",e)},expression:"editedItemProd.percentage"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[i("v-select",{attrs:{items:t.states,"item-text":"name","item-value":"id",label:"选择奖品",multiple:"",chips:"","persistent-hint":""},on:{change:function(e){return t.prizeItemChange(t.editedItemProd.prizeItemIds)}},model:{value:t.editedItemProd.prizeItemIds,callback:function(e){t.$set(t.editedItemProd,"prizeItemIds",e)},expression:"editedItemProd.prizeItemIds"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeProd}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.saveProd}},[t._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItemProd(a)}}},[t._v(" mdi-pencil ")]),i("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}])})],1)],1)},fi=[],gi=(i("25f0"),{name:"ManageActivity",data:function(){return{search:"",headers:[{text:"活动名称",align:"start",sortable:!1,value:"name"},{text:"活动类型",value:"activityTypeshow"},{text:"抽奖渠道",value:"availableChannels"},{text:"抽奖方式",value:"lotteryDisplayshow"},{text:"开始时间",value:"startTimeshow"},{text:"结束时间",value:"endTimeshow"},{text:"Actions",value:"actions",sortable:!1}],desserts:[],startTime:(new Date).toISOString().substr(0,10),dialog:!1,editedIndex:-1,editedItem:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItem:{name:"",calories:0,fat:0,carbs:0,protein:0},states:[],activityId:"",dialogProd:!1,dialogProdAdd:!1,headersProd:[{text:"活动档次",align:"start",sortable:!1,value:"name"},{text:"活动概率",value:"percentage"},{text:"活动奖品",value:"prizeItemNames"},{text:"操作",value:"actions",sortable:!1}],dessertsProd:[],editedIndexProd:-1,editedItemProd:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItemProd:{name:"",calories:0,fat:0,carbs:0,protein:0}}},created:function(){this.getActivityAva()},computed:{formTitle:function(){return-1===this.editedIndex?"添加新档次 - 商品":"修改新档次 - 商品"}},watch:{dialog:function(t){t||this.close()},dialogProd:function(t){t||this.closeProd()}},methods:{editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()},getActivityAva:function(){var t=this,e={StartTime:"1970-01-01",AvailableChannels:"ngs,ngsplaza,alldays"};e=JSON.stringify(e),e=JSON.parse(e),N(e).then((function(e){console.log(e),t.desserts=e.data.data;var i,a=e.data.data,n=Object(Ut["a"])(a);try{for(n.s();!(i=n.n()).done;){var s=i.value;console.log(s),"SingleAttendance"===s.activityType?s.activityTypeshow="单次签到活动":"SequentialAttendance"===s.activityType?s.activityTypeshow="连续签到活动":"Lottery"===s.activityType&&(s.activityTypeshow="抽奖活动"),null===s.lotteryDisplay||""===s.lotteryDisplay||"None"===s.lotteryDisplay?s.lotteryDisplayshow="无":"Roulette"===s.lotteryDisplay?s.lotteryDisplayshow="转盘":"Digging"===s.lotteryDisplay?s.lotteryDisplayshow="寻宝":"Scratchcard"===s.lotteryDisplay&&(s.lotteryDisplayshow="刮刮乐"),s.startTimeshow=s.startTime.substr(0,10),""===s.endTime||null===s.endTime?s.endTimeshow="无":s.endTimeshow=s.endTime.substr(0,10)}}catch(o){n.e(o)}finally{n.f()}}))},getAct:function(t){var e=this,i={id:t.id},a={ActivityId:t.id};this.activityId=t.id,L(i).then((function(t){console.log(t)})),Q(a).then((function(t){console.log(t.data.data);var i,a=t.data.data,n=Object(Ut["a"])(a);try{var s=function(){var t=i.value;t.prizeItemNames=[];var e={Ids:t.prizeItemIds.toString()};H(e).then((function(e){var i,a=e.data.data,n=Object(Ut["a"])(a);try{for(n.s();!(i=n.n()).done;){var s=i.value;t.prizeItemNames.push(s.name)}}catch(o){n.e(o)}finally{n.f()}}))};for(n.s();!(i=n.n()).done;)s()}catch(o){n.e(o)}finally{n.f()}e.dessertsProd=t.data.data})),this.dialogProd=!0,this.getProd()},getProd:function(){var t=this,e={PageIndex:1,PageSize:50};X(e).then((function(e){console.log(e.data.data);var i,a=e.data.data,n=Object(Ut["a"])(a);try{for(n.s();!(i=n.n()).done;){var s=i.value,o={name:s.name,id:s.id};t.states.push(o)}}catch(r){n.e(r)}finally{n.f()}}))},saveProd:function(){var t=this;if(this.editedIndexProd>-1){Object.assign(this.dessertsProd[this.editedIndexProd],this.editedItemProd);var e=this.dessertsProd[this.editedIndexProd];console.log(e),et(e).then((function(e){console.log(e),t.getAll()}))}else{var i=this.editedItemProd,a={name:i.name,percentage:Number(i.percentage),activityId:this.activityId,prizeItemIds:i.prizeItemIds};K(a).then((function(e){console.log(e),t.getAll()}))}this.closeProd()},editItemProd:function(t){console.log(t),this.editedIndexProd=this.dessertsProd.indexOf(t),this.editedItemProd=Object.assign({},t),this.dialogProdAdd=!0},getAll:function(){var t=this,e={ActivityId:this.activityId};Q(e).then((function(e){if(e){var i,a=e.data.data,n=Object(Ut["a"])(a);try{var s=function(){var t=i.value;t.prizeItemNames=[];var e={Ids:t.prizeItemIds.toString()};H(e).then((function(e){var i,a=e.data.data,n=Object(Ut["a"])(a);try{for(n.s();!(i=n.n()).done;){var s=i.value;t.prizeItemNames.push(s.name)}}catch(o){n.e(o)}finally{n.f()}}))};for(n.s();!(i=n.n()).done;)s()}catch(o){n.e(o)}finally{n.f()}t.dessertsProd=a}else t.dessertsProd=[]}))},deleteItem:function(t){var e=this;console.log(t);var i={id:t.id};tt(i).then((function(t){console.log(t),e.getAll()}))},closeProd:function(){var t=this;this.dialogProdAdd=!1,this.$nextTick((function(){t.editedItemProd=Object.assign({},t.defaultItemProd),t.editedIndexProd=-1}))},delAct:function(t){var e=this;console.log(t);var i={id:t.id};console.log(i),B(i).then((function(t){console.log(t),e.getActivityAva()}))}}}),bi=gi,yi=i("a523"),xi=i("8fea"),Ii=i("2a7f"),_i=Object(l["a"])(bi,pi,fi,!1,null,"7abfb033",null),ki=_i.exports;d()(_i,{VBtn:nt["a"],VCard:st["a"],VCardActions:ot["a"],VCardText:ot["c"],VCardTitle:ot["d"],VCol:rt["a"],VContainer:yi["a"],VDataTable:xi["a"],VDialog:pe["a"],VDivider:lt["a"],VIcon:ct["a"],VRow:dt["a"],VSelect:Qt["a"],VSpacer:mt["a"],VTextField:ht["a"],VToolbar:ge["a"],VToolbarTitle:Ii["a"]});var wi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("v-card",[i("v-card-title",[i("v-toolbar-title",[t._v("奖品管理")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-data-table",{staticStyle:{"margin-top":"-10px"},attrs:{headers:t.headers,items:t.desserts,"sort-by":"calories",search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("更新商品")])]),i("v-card-text",[i("v-container",[i("v-col",[i("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[i("v-text-field",{attrs:{label:"商品名称"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[i("v-select",{attrs:{items:t.prizeTpyeItems,label:"商品类型"},model:{value:t.editedItem.prizeType,callback:function(e){t.$set(t.editedItem,"prizeType",e)},expression:"editedItem.prizeType"}})],1),i("v-col",{directives:[{name:"show",rawName:"v-show",value:"Coupon"===t.editedItem.prizeType,expression:"editedItem.prizeType === 'Coupon'"}],attrs:{cols:"12",sm:"6",md:"8"}},[i("v-text-field",{attrs:{label:"优惠券兑换码"},model:{value:t.editedItem.couponActiveCode,callback:function(e){t.$set(t.editedItem,"couponActiveCode",e)},expression:"editedItem.couponActiveCode"}})],1),i("v-col",{directives:[{name:"show",rawName:"v-show",value:"Credit"===t.editedItem.prizeType,expression:"editedItem.prizeType === 'Credit'"}],attrs:{cols:"12",sm:"6",md:"8"}},[i("v-text-field",{attrs:{label:"积分"},model:{value:t.editedItem.credit,callback:function(e){t.$set(t.editedItem,"credit",e)},expression:"editedItem.credit"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[i("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),i("v-icon",{staticClass:"mr-2",attrs:{color:"red"},on:{click:function(e){return t.delAct(a)}}},[t._v(" mdi-delete ")])]}}])})],1)],1)},Ci=[],Ti={name:"ManageProd",data:function(){return{search:"",headers:[{text:"商品名称",align:"start",sortable:!1,value:"name"},{text:"商品类型",value:"prizeTypeshow"},{text:"优惠券活动码",value:"couponActiveCodeshow"},{text:"积分",value:"creditshow"},{text:"Actions",value:"actions",sortable:!1}],desserts:[],startTime:(new Date).toISOString().substr(0,10),dialog:!1,editedIndex:-1,editedItem:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItem:{name:"",calories:0,fat:0,carbs:0,protein:0},prizeTpyeItems:["Credit","Coupon","Physical"]}},created:function(){this.getProd()},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(t){t||this.close()}},methods:{editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this.desserts.indexOf(t);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(e,1)},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){var t=this;if(this.editedIndex>-1){Object.assign(this.desserts[this.editedIndex],this.editedItem),console.log("更改成功123"),console.log(this.desserts[this.editedIndex]);var e=this.desserts[this.editedIndex];"Credit"!==e.prizeType&&(e.credit=null),"Coupon"!==e.prizeType&&(e.couponActiveCode=null);var i={id:e.id,name:e.name,prizeType:e.prizeType,couponActiveCode:e.couponActiveCode,credit:e.credit,categoryName:"other",brandName:"other"};console.log(i),G(i).then((function(e){console.log(e.data),t.getProd()}))}else this.desserts.push(this.editedItem);this.close()},getProd:function(){var t=this,e={name:"积分"};Y(e).then((function(t){console.log(t)}));var i={PageIndex:1,PageSize:50};X(i).then((function(e){console.log(e.data.data),t.desserts=e.data.data;var i,a=Object(Ut["a"])(t.desserts);try{for(a.s();!(i=a.n()).done;){var n=i.value;console.log(n),"Credit"===n.prizeType?n.prizeTypeshow="积分商品":"Coupon"===n.prizeType?n.prizeTypeshow="优惠券兑换码":"Physical"===n.prizeType&&(n.prizeTypeshow="实物"),""===n.couponActiveCode||null===n.couponActiveCode?n.couponActiveCodeshow="无":n.couponActiveCodeshow=n.couponActiveCode,""===n.credit||null===n.credit?n.creditshow="无":n.creditshow=n.credit}}catch(s){a.e(s)}finally{a.f()}}))},delAct:function(t){var e=this,i={id:t.id};console.log(i),W(i).then((function(t){console.log(t),e.getProd()}))}}},Pi=Ti,Vi=Object(l["a"])(Pi,wi,Ci,!1,null,"1a5db948",null),Ai=Vi.exports;d()(Vi,{VBtn:nt["a"],VCard:st["a"],VCardActions:ot["a"],VCardText:ot["c"],VCardTitle:ot["d"],VCol:rt["a"],VContainer:yi["a"],VDataTable:xi["a"],VDialog:pe["a"],VDivider:lt["a"],VIcon:ct["a"],VSelect:Qt["a"],VSpacer:mt["a"],VTextField:ht["a"],VToolbarTitle:Ii["a"]});var Si=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[!0===this.login?i("v-row",{staticStyle:{position:"absolute",width:"60vw",height:"50vh",top:"calc(50% - 25vh)",left:"calc(50% - 30vw)"},attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"12",sm:"10",md:"8",lg:"6"}},[i("v-card",{ref:"form"},[i("v-card-title",{staticClass:"title font-weight-regular justify-space-between"},[i("span",[t._v("登 录")])]),i("v-card-text",[i("v-text-field",{ref:"username",attrs:{label:"用户名",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),i("div",{staticClass:"flex-dir-row"},[i("v-text-field",{ref:"yan",attrs:{label:"密码"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}})],1)],1),i("v-divider",{staticClass:"mt-12"}),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.zhuceBtn}},[t._v("注 册")]),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.submit}},[t._v("登 录")])],1)],1)],1)],1):t._e(),i("v-snackbar",{attrs:{timeout:t.timeout,top:""},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[i("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")]),!0===this.zhuce?i("v-row",{staticStyle:{position:"absolute",width:"60vw",height:"50vh",top:"calc(50% - 25vh)",left:"calc(50% - 30vw)"},attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"12",sm:"10",md:"8",lg:"6"}},[i("v-card",{ref:"form"},[i("v-card-title",{staticClass:"title font-weight-regular justify-space-between"},[i("span",[t._v("注 册")])]),i("v-card-text",[i("v-text-field",{ref:"username",attrs:{label:"用户名",required:""},model:{value:t.zc_username,callback:function(e){t.zc_username=e},expression:"zc_username"}}),i("div",{staticClass:"flex-dir-row"},[i("v-text-field",{ref:"yan",attrs:{label:"密码",rules:t.pwdRule,required:""},model:{value:t.zc_pwd,callback:function(e){t.zc_pwd=e},expression:"zc_pwd"}})],1),i("div",{staticClass:"flex-dir-row"},[i("v-text-field",{ref:"yan",attrs:{label:"确认密码",required:""},model:{value:t.zc_sure_pwd,callback:function(e){t.zc_sure_pwd=e},expression:"zc_sure_pwd"}})],1),i("div",[t._v("密码需包含大小写、数字和符号")])],1),i("v-divider",{staticClass:"mt-12"}),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.backBtn}},[t._v("返 回")]),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.zcBtn}},[t._v("注册并登录")])],1)],1)],1)],1):t._e()],1)])},zi=[],Oi={name:"MaLogin",data:function(){return{snackbar:!1,text:"请输入正确手机号！",timeout:1500,username:"",pwd:"",formHasErrors:!0,yanzheng:!1,getBtn:!0,timeBtn:!1,time:60,login:!0,zhuce:!1,zc_username:"",zc_pwd:"",zc_sure_pwd:"",pwdRule:[function(t){return t&&t.length>=6||"密码长度 > 6"}]}},computed:{form:function(){return{username:this.username,yan:this.yan}}},watch:{},methods:{backBtn:function(){this.zhuce=!1,this.login=!0},check_username_pwd:function(){this.username?this.pwd?this.yanzheng=!0:(this.snackbar=!0,this.text="请输入密码！"):(this.snackbar=!0,this.text="请输入用户名！")},resetForm:function(){var t=this;this.formHasErrors=!0,Object.keys(this.form).forEach((function(e){t.$refs[e].reset()}))},submit:function(){var t=this;if(this.yanzheng=!1,this.check_username_pwd(),this.yanzheng){console.log("成功");var e={client_id:"password",grant_type:"password",scope:"eplus.test.scope openid",username:this.username,password:this.pwd};C(e).then((function(e){console.log(e.data);var i={access_token:e.data.access_token};i=JSON.stringify(i),localStorage.setItem("token",i),T().then((function(e){if(e){console.log("userid:"),console.log(e);var i={userId:e.data.sub};i=JSON.stringify(i),localStorage.setItem("user",i),t.$router.push({path:"/management/addactivity"})}}))}))}else console.log("验证失败")},zhuceBtn:function(){this.login=!1,this.zhuce=!0},zcBtn:function(){var t=this,e={client_id:"password",grant_type:"password",scope:"eplus.test.scope openid",username:"admin",password:"Pa$$w0rd"};console.log(e),C(e).then((function(e){var i={access_token:e.data.access_token};if(i=JSON.stringify(i),localStorage.setItem("token",i),t.zc_pwd===t.zc_sure_pwd){var a={userName:t.zc_username,password:t.zc_pwd,role:"manager"};F(a).then((function(e){console.log(e),t.username=t.zc_username,t.pwd=t.zc_pwd,t.submit()}))}else t.snackbar=!0,t.text="密码不一致！"}))}}},Di=Oi,ji=(i("8fab"),Object(l["a"])(Di,Si,zi,!1,null,"60c57392",null)),Li=ji.exports;d()(ji,{VBtn:nt["a"],VCard:st["a"],VCardActions:ot["a"],VCardText:ot["c"],VCardTitle:ot["d"],VCol:rt["a"],VDivider:lt["a"],VRow:dt["a"],VSnackbar:vt["a"],VSpacer:mt["a"],VTextField:ht["a"]});var Ni=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v(t._s(t.person))]),i("div",[t._v(t._s(t.activityId))]),i("v-app",{attrs:{id:"inspire"}},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headersProd,items:t.dessertsProd,"sort-by":"calories"},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[t._v("添加活动档次 - 奖品")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),a),[t._v("New Item")])]}}]),model:{value:t.dialogProdAdd,callback:function(e){t.dialogProdAdd=e},expression:"dialogProdAdd"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),i("v-card-text",[i("v-container",[i("v-col",[i("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[i("v-text-field",{attrs:{label:"活动档次"},model:{value:t.editedItemProd.name,callback:function(e){t.$set(t.editedItemProd,"name",e)},expression:"editedItemProd.name"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[i("v-text-field",{attrs:{label:"活动概率"},model:{value:t.editedItemProd.percentage,callback:function(e){t.$set(t.editedItemProd,"percentage",e)},expression:"editedItemProd.percentage"}})],1),i("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[i("v-select",{attrs:{items:t.states,"item-text":"name","item-value":"id",label:"选择奖品",multiple:"",chips:"","persistent-hint":""},on:{change:function(e){return t.prizeItemChange(t.editedItemProd.prizeItemIds)}},model:{value:t.editedItemProd.prizeItemIds,callback:function(e){t.$set(t.editedItemProd,"prizeItemIds",e)},expression:"editedItemProd.prizeItemIds"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeProd}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.saveProd}},[t._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[i("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.editItemProd(a)}}},[t._v(" mdi-pencil ")]),i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}])})],1)],1)},$i=[],Bi={name:"AddPrizeTier",data:function(){return{person:"添加活动奖品",activityId:"",activityData:{},states:[],dialogProdAdd:!1,headersProd:[{text:"活动档次",align:"start",sortable:!1,value:"name"},{text:"活动概率",value:"percentage"},{text:"活动奖品",value:"prizeItemNames"},{text:"操作",value:"actions",sortable:!1}],dessertsProd:[],editedIndexProd:-1,editedItemProd:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItemProd:{name:"",calories:0,fat:0,carbs:0,protein:0}}},created:function(){this.getRoute(),this.getProd(),this.getAll()},computed:{formTitle:function(){return-1===this.editedIndexProd?"添加新档次 - 商品":"修改新档次 - 商品"}},watch:{dialog:function(t){t||this.closeProd()}},methods:{getAll:function(){var t=this,e={ActivityId:this.activityId};Q(e).then((function(e){if(e){var i,a=e.data.data,n=Object(Ut["a"])(a);try{var s=function(){var t=i.value;t.prizeItemNames=[];var e={Ids:t.prizeItemIds.toString()};H(e).then((function(e){var i,a=e.data.data,n=Object(Ut["a"])(a);try{for(n.s();!(i=n.n()).done;){var s=i.value;t.prizeItemNames.push(s.name)}}catch(o){n.e(o)}finally{n.f()}}))};for(n.s();!(i=n.n()).done;)s()}catch(o){n.e(o)}finally{n.f()}t.dessertsProd=a}else t.dessertsProd=[]}))},prizeItemChange:function(t){console.log(t)},getProd:function(){var t=this,e={PageIndex:1,PageSize:50};X(e).then((function(e){var i,a=e.data.data,n=Object(Ut["a"])(a);try{for(n.s();!(i=n.n()).done;){var s=i.value,o={name:s.name,id:s.id};t.states.push(o)}}catch(r){n.e(r)}finally{n.f()}}))},getRoute:function(){var t=this.$route;this.activityData=t.query,this.activityId=t.query.id},editItemProd:function(t){console.log(t),this.editedIndexProd=this.dessertsProd.indexOf(t),this.editedItemProd=Object.assign({},t),this.dialogProdAdd=!0},deleteItem:function(t){var e=this,i={id:t.id};tt(i).then((function(t){console.log(t),e.getAll()}))},closeProd:function(){var t=this;this.dialogProdAdd=!1,this.$nextTick((function(){t.editedItemProd=Object.assign({},t.defaultItemProd),t.editedIndexProd=-1}))},saveProd:function(){var t=this;if(this.editedIndexProd>-1){Object.assign(this.dessertsProd[this.editedIndexProd],this.editedItemProd);var e=this.dessertsProd[this.editedIndexProd];console.log(e),et(e).then((function(e){console.log(e),t.getAll()}))}else{var i=this.editedItemProd,a={name:i.name,percentage:Number(i.percentage),activityId:this.activityId,prizeItemIds:i.prizeItemIds};K(a).then((function(e){console.log(e),t.getAll()}))}this.closeProd()}}},Mi=Bi,Ei=Object(l["a"])(Mi,Ni,$i,!1,null,null,null),Ui=Ei.exports;d()(Ei,{VApp:u["a"],VBtn:nt["a"],VCard:st["a"],VCardActions:ot["a"],VCardText:ot["c"],VCardTitle:ot["d"],VCol:rt["a"],VContainer:yi["a"],VDataTable:xi["a"],VDialog:pe["a"],VDivider:lt["a"],VIcon:ct["a"],VSelect:Qt["a"],VSpacer:mt["a"],VTextField:ht["a"],VToolbar:ge["a"],VToolbarTitle:Ii["a"]}),a["a"].use(p["a"]);var Ri=[{path:"/home",name:"Layout",component:Pt,children:[{path:"/home/person",name:"Person",component:Bt},{path:"/home/ngs",name:"Ngs",component:ye},{path:"/home/gua",name:"Gua",component:$e},{path:"/home/zhuan",name:"Zhuan",component:Fe},{path:"/home/address",name:"Address",component:Yt},{path:"/home/addAddress",name:"addAddress",component:ee},{path:"/home/adward",name:"Adward",component:re}]},{path:"/",redirect:"/login"},{path:"/about",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}},{path:"/login",name:"Login",component:gt},{path:"/management",name:"management",component:ei,children:[{path:"/management/person",name:"Person",component:Bt},{path:"/management/addActivity",name:"AddActivity",component:li},{path:"/management/addprod",name:"AddProd",component:hi},{path:"/management/addPrizeTier",name:"AddPrizeTier",component:Ui},{path:"/management/manageActivity",name:"ManageActivity",component:ki},{path:"/management/manageProd",name:"ManageProd",component:Ai}]},{path:"/management/login",name:"MaLogin",component:Li}],Fi=new p["a"]({mode:"history",routes:Ri}),qi=Fi,Yi=i("f309");a["a"].use(Yi["a"]);var Ji=new Yi["a"]({});a["a"].config.productionTip=!1,new a["a"]({router:qi,vuetify:Ji,render:function(t){return t(h)}}).$mount("#app")},"7fc3":function(t,e,i){},"8b42":function(t,e,i){"use strict";i("7fc3")},"8fab":function(t,e,i){"use strict";i("b685")},"904f":function(t,e,i){},b685:function(t,e,i){},dc11:function(t,e,i){"use strict";i("38e4")},f80f:function(t,e,i){t.exports=i.p+"img/get.5e945c70.jpg"},fbac:function(t,e,i){}});
//# sourceMappingURL=app.370614cd.js.map